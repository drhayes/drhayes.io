{{ define "header"}}
<header class="tc pv4 h-card vcard">
  {{ $logo := resources.Get "raven.png" }}
  <a href="https://drhayes.io" class="u-url url">
    <img src="{{ $logo.RelPermalink }}" alt="drhayes.io raven logo" class="w4 h4 br-100 pa1 u-photo">
  </a>
  <h1 class="f3 lh-title mb1 tracked-tight p-name fn">David Hayes</h1>
  <a href="mailto:hi@drhayes.io" class="f5 tracked link u-email email">hi@drhayes.io</a>
</header>
{{ end }}

{{ define "main" }}

{{ $section_name := "posts" }}
{{ $posts := (slice "posts") }}
{{/* Create a variable with that section to use in multiple places. */}}
{{ $section := where .Site.RegularPages "Section" "in" $posts }}
{{/* Check to see if the section is defined for ranging through it */}}
{{ $section_count := len $section }}
{{ $n_posts := 5 }}


<section class="mh1">
  {{ $first_post := first 1 $section }}
  {{ range $first_post }}
    <article class="blog-article pa3 mh2 mb2 grow br2">
      <h1 class="f4 tc lh-title">
        <a href="{{ .RelPermalink }}" class="black link">{{ .Title }}</a>
      </h1>
      <p class="f5 tj lh-copy">
        <a href="{{ .RelPermalink }}" class="black link">{{ plainify .Summary | safeHTML }}</a>
      </p>
      <p class="tr f7 tracked ttu">{{ .ReadingTime }} minute read</p>
    </article>
  {{ end }}

  {{ range (first $n_posts (after 1 $section)) }}
    <article class="blog-article pa3 mh2 mb2 grow br2">
      <h1 class="f4 tc lh-title">
        <a href="{{ .RelPermalink }}" class="black link">{{ .Title }}</a>
      </h1>
      <p class="f5 tj lh-copy">
        <a href="{{ .RelPermalink }}" class="black link">{{ plainify .Summary | safeHTML }}</a>
      </p>
      <p class="tr f7 tracked ttu">{{ .ReadingTime }} minute read</p>
    </article>
  {{ end }}
</section>
{{ end }}
