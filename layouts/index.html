{{ define "header"}}
<header class="tc pt4 mw9 center h-card vcard">
  {{ $logo := resources.Get "raven.png" }}
  <a href="https://drhayes.io" class="u-url url">
    <img src="{{ $logo.RelPermalink }}" alt="drhayes.io raven logo" class="w4 h4 br-100 pa1 u-photo">
  </a>
  <h1 class="f2 lh-title mb1 tracked-tight p-name fn">Hi, I'm David Hayes. üëãüèΩ</h1>
  <a href="mailto:hi@drhayes.io" class="f5 black link u-email email">hi@drhayes.io</a>
  <h3 class="f5 normal tc">I do stuff with computers. I live in Austin, TX.</h3>
  <nav class="db mv4">
    <ul class="list pa0 ma0 nowrap overflow-x-auto">
      {{ range .Site.Menus.main }}
      <li class="dib ph2">
        <a class="f5 gray dim link" href="{{ .URL }}" title="{{ .Name }} page">{{ .Name }}</a>
      </li>
      {{ end }}
    </ul>
  </nav>
</header>
{{ end }}

{{ define "main" }}

{{ $section_name := "posts" }}
{{ $posts := (slice "posts") }}
{{/* Create a variable with that section to use in multiple places. */}}
{{ $section := where .Site.RegularPages "Section" "in" $posts }}
{{/* Check to see if the section is defined for ranging through it */}}
{{ $section_count := len $section }}
{{ $n_posts := 5 }}


<section class="mw9 center">
  {{ $first_post := first 1 $section }}
  {{ range $first_post }}
    <article class="blog-article pa3 mh2 mb2 br2 mr1-ns">
      <h1 class="f4 tc lh-title">
        <a href="{{ .RelPermalink }}" class="black link">{{ .Title }}</a>
      </h1>
      <p class="f5 tj lh-copy">
        <a href="{{ .RelPermalink }}" class="black link">{{ plainify .Summary | safeHTML }}</a>
      </p>
      <p class="tr f7 tracked ttu">{{ .ReadingTime }} minute read</p>
    </article>
  {{ end }}

  <div class="flex flex-column flex-row-ns flex-wrap">
  {{ range (first $n_posts (after 1 $section)) }}
    <div class="w-50-ns mb2">
      <article class="blog-article border-box pa3 mh2 h-100 br2 mr1-ns">
        <h1 class="f4 tc lh-title">
          <a href="{{ .RelPermalink }}" class="black link">{{ .Title }}</a>
        </h1>
        <p class="f5 tj lh-copy">
        <a href="{{ .RelPermalink }}" class="black link">{{ plainify .Summary | safeHTML }}</a>
        </p>
        <p class="tr f7 tracked ttu">{{ .ReadingTime }} minute read</p>
      </article>
    </div>
  {{ end }}
  </div>
</section>
{{ end }}
